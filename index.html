<html>
	<head>
	<title>GeeMail - Nicole Sandry</title>
		<script src="js/mail-generator.js"></script>
		<link href="css/style.css" rel="stylesheet" media="screen">
    <script>
      window.onload = function(){
        // ALL OF YOUR JAVASCRIPT CODE SHOULD GO HERE. 
        // We have to use window.onload so your JavaScript doesn't execute until the page has loaded and all HTML has been downloaded to your browser

/*var sum = 0; */

var indexTwo = [
	{
	draft: 'Draft',
	sent: 'Sent',
	trash: 'Trash'
	}
];

	var sum = 'Inbox (' + geemails.length + ')';
	console.log(sum);
	sum.id = 'inbox1';
	var inbox = document.createElement('li');
	inbox.className = 'ind';
	inbox.innerHTML = sum;
	banner.appendChild(inbox);

 	var draftIt = document.createElement('li');
 	draftIt.className = 'ind';
 	draftIt.innerHTML = indexTwo[0].draft;
 	banner.appendChild(draftIt);

 	var draftItTwo = document.createElement('li');
 	draftItTwo.className = 'ind';
 	draftItTwo.innerHTML = indexTwo[0].sent;
 	banner.appendChild(draftItTwo);

 	var draftItThree = document.createElement('li');
 	draftItThree.className = 'ind';
 	draftItThree.innerHTML = indexTwo[0].trash;
 	banner.appendChild(draftItThree);

for (var i=0; i<geemails.length; i++){

/*counter.innerHTML = sum + ' ' + indexTwo.draft + indexTwo.sent + indexTwo.trash;*/

	var wrap = document.createElement('div');
	wrap.className = 'wrapper';
	wrap.innerHTML = '';
	main.appendChild(wrap);

	var line = document.createElement('hr');
	line.className = 'line';
	wrap.appendChild(line);

	var date = document.createElement('div');
	date.className= 'date';
	date.innerHTML = geemails[i].date /*geemails[i].date*/;
	wrap.appendChild(date);

	var send = document.createElement('div');
	send.className = 'send';
	send.innerHTML = geemails[i].sender /*geemails[i].sender*/;
	wrap.appendChild(send);

	var subj = document.createElement('div');
	subj.style.cursor = 'pointer';
	subj.className = 'subj';
	subj.innerHTML = geemails[i].subject;
	wrap.appendChild(subj);
	

	var bod = document.createElement('div');
	bod.className = 'bod';
	bod.innerHTML = geemails[i].body;
	subj.appendChild(bod);

	}

//TOGGLE PART 1
var content = document.getElementsByClassName('subj');
	/*document.getElementsByClassName('bod').style.cursor = 'pointer';*/
	for(var p = 0; p<content.length; p++){
		content[p].addEventListener('click', subBod);
	}

	function subBod(){
		var content = this.querySelectorAll('.bod')[0];
		if(content.style.display === 
			'none'){
			content.style.display = 'block';
			content.style.color = 'pink';
		}else{
			content.style.display = 'none';
		}
	}


//THIS GENERATES NEW MESSAGES
	/*console.log(getNewMessage());*/

	function newMail(){
		
		var newIsh = getNewMessage();

/*	var wrapper = document.createElement('div');
	wrap.className = 'wrapper';
	wrap.innerHTML = '';
	main.appendChild(wrap);*/ //coding no like dis

	var line = document.createElement('hr');
	line.className = 'line';
	wrap.appendChild(line);

	var date = document.createElement('div');
	date.className= 'date';
	date.innerHTML = newIsh.date;
	wrap.appendChild(date);

	var send = document.createElement('div');
	send.className = 'send';
	send.innerHTML = newIsh.sender;
	wrap.appendChild(send);

	var subj = document.createElement('div');
	subj.style.cursor = 'pointer';
	subj.className = 'subj';
	subj.innerHTML = newIsh.subject;
	wrap.appendChild(subj);
	

	var bod = document.createElement('div');
	bod.className = 'bod';
	bod.innerHTML = newIsh.body;
	subj.appendChild(bod);

//TOGGLE PART 2: had to move into the second set of messages otherwise it wouldn't work on the new messages being generated
var newContent = document.getElementsByClassName('subj');
	console.log(newContent.length);
	for(var s = 0; s<newContent.length; s++){
		newContent[s].addEventListener('click', newSubBod);
	}

	function newSubBod(){
		var newContent = this.querySelectorAll('.bod')[0];
		if(newContent.style.display ==='none'){
			newContent.style.display = 'block';
			newContent.style.color = 'pink';
		}else{
			newContent.style.display = 'none';
		}
	}

//COUNTER
	/*document.getElementById('inbox1');
	counter.innerHTML = 'Inbox (' + newContent.length++ +') ' + indexTwo.draft + indexTwo.sent + indexTwo.trash;*/
	
	document.getElementById('inbox1');
	inbox.innerHTML = 'Inbox (' + newContent.length++ +')';
	banner.appendChild(inbox);

 	draftIt.innerHTML = indexTwo[0].draft;
 	banner.appendChild(draftIt);

 	draftItTwo.innerHTML = indexTwo[0].sent;
 	banner.appendChild(draftItTwo);

 	draftItThree.innerHTML = indexTwo[0].trash;
 	banner.appendChild(draftItThree);

	}

	setInterval(newMail, 3000);

//PAU HANA!!

};
    </script>

	</head>

	<body>

		<div id="banner"><h1>Gee-Mail</h1>

		</div>

			<div id="counter">
			</div>

		<div id = "main"> 

		</div>
	</body>

</html>